---
title: Suchen
---

<body>
  <div>
    <input class="form-control me-2 mt-4 mb-4" type="text" placeholder="Suchen" id="search-box-js" name="query" oninput="search_text()">
    <button class="btn btn-secondary" onclick="random_song()">Random Song</button>
  </div>
  <h5>Deine Favoriten</h5>
  <div id="favorite-results">

  </div>
  <h5>Alle songs</h5>
  <div id="search-results">
    
  </div> 
</body>

<script>
  {% assign songs = site.html_pages | where: "dir", "/songs/" %}
  var searchIndex = [
    {% for page in songs %}
      {
        "title" : "{{ page.title | escape }}",
        "interpret" : "{{ page.interpret }}",
        "url" : "{{ site.baseurl }}{{ page.url }}"
      }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  function search_text() {
    var inputElement = document.getElementById("search-box-js");
    var value = inputElement.value;
    search_list(value);
  }

  function search(query) {
    var results = [];
    for (var i = 0; i < searchIndex.length; i++) {
      var post = searchIndex[i];
      if (post.title.toLowerCase().indexOf(query.toLowerCase()) >= 0 ||
          post.interpret.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
        results.push(post);
      }
    }
    return results;
  }

function search_list(query) {
// Use the attribute value as needed


  var results = search(query);
  var html = '';
  for (var i = 0; i < results.length; i++) {
    var post = results[i];
    html += '<li><a href="' + post.url + '">' + post.title + ' - ' + post.interpret + '</a></li>';
  }
  document.getElementById('search-results').innerHTML = html;
}
function random_song() {
  var songlist = "";
  var randomsong = "";
  var lengtharray = "";
  var thearray = "";
  songlist = search("");
  lengtharray = songlist.length;
  thearray = songlist[Math.floor(Math.random() * lengtharray)];
  randomsong = "https://elija-k.github.io/" + thearray.url;
  window.location.href = randomsong;
}
function list_favorite() {
  }
  favorites = "";
  favorites = document.cookie;
  if (favorites = "undefined") {
    document.getElementById("favorite-results").innerHTML = "<p>Du hast keine Favoriten :(</p>";
  }
  else {
    const startIndex = favorites.indexOf('songs=');
    if (startIndex === -1) {
      document.getElementById("favorite-results").innerHTML = "<p>Du hast keine Favoriten :(</p>";
    }
    const endIndex = favorites.indexOf(';', startIndex);
    let songString;
    if (endIndex === -1) {
      songString = favorites.substring(startIndex + 6);
    
    } else {
      songString = favorites.substring(startIndex + 6, endIndex);
    }
    try {
      const songsArray = JSON.parse(decodeURIComponent(songsString));
    } catch (error) {
      console.error("Fehler beim Parsen der Cookie-Daten", error);
      document.getElementById("favorite-results").innerHTML = "<p>Deine Favoriten konnten nicht geladen werden :(</p>"
    }
    if (songs) {
      console.log(songs);
    }
    favhtml += '<li><a href="' + url + '">' + title + ' - ' + interpret + '</a></li>';
    document.getElementById("favorite-results").innerHTML = favhtml;

  }
search_list("");
list_favorite();

</script>
